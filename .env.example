# Supabase Configuration
# Create a Supabase project at https://supabase.com
# Copy these values from your project settings > API

# Supabase URL (e.g., https://xxxxx.supabase.co)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here

# Supabase Publishable Key (public, safe to use in browser)
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=your_supabase_publishable_key_here

# Supabase Service Role Key (KEEP SECRET, server-side only)
# Required for integration tests, seeding, and Supabase admin tasks
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# Database Connection URLs (from Supabase project settings > Database)
# - DATABASE_URL: Connection pooler (port 6543) - use for app runtime queries
# - DIRECT_URL: Direct connection (port 5432) - use for Drizzle Kit migrations
DATABASE_URL=postgres://postgres.xxxx:password@aws-0-region.pooler.supabase.com:6543/postgres
DIRECT_URL=postgres://postgres.xxxx:password@aws-0-region.supabase.com:5432/postgres

# Application Configuration
# Next.js development server port (default: 3000)
PORT=3000

# Email Transport Configuration
# Set to 'smtp' to use local Mailpit for testing emails (Supabase config still labels it `[inbucket]`)
# Leave unset to use Resend (requires RESEND_API_KEY)
EMAIL_TRANSPORT=smtp

# Mailpit email testing server ports (Supabase still names the config section `[inbucket]`)
# Each worktree needs unique ports to avoid conflicts
# Web UI/API ports:
# - Main: 54324        SMTP: 54325
# - Secondary: 55324   SMTP: 55325
# - Review: 56324      SMTP: 56325
# - AntiGravity: 57324 SMTP: 57325
MAILPIT_PORT=54324
MAILPIT_SMTP_PORT=54325
# Legacy aliases for compatibility with Supabase CLI defaults
INBUCKET_PORT=54324
INBUCKET_SMTP_PORT=54325

# Authentication
# URL to redirect to after authentication (e.g., http://localhost:3000/auth/callback)
# REQUIRED in production for password reset emails
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Dev/preview autologin (defaults to true when not production)
DEV_AUTOLOGIN_ENABLED=true
DEV_AUTOLOGIN_EMAIL=admin@test.com
DEV_AUTOLOGIN_PASSWORD=TestPassword123

# Resend Email Service (Production)
# Get your API key from https://resend.com/api-keys
# Only needed if sending custom emails via Resend SDK
# Auth emails via Supabase SMTP don't require this variable
RESEND_API_KEY=re_xxxxxxxxxxxx

# Upstash Redis (Rate Limiting)
# Required for login/signup/forgot-password and public issue reporting rate limiting
# Get these from https://console.upstash.com or Vercel Marketplace integration
#
# If using Vercel Marketplace, add these env vars referencing the auto-created KV_* values:
# UPSTASH_REDIS_REST_URL = ${KV_REST_API_URL}
# UPSTASH_REDIS_REST_TOKEN = ${KV_REST_API_TOKEN}
UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_redis_rest_token_here
