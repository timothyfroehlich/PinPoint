/* Tailwind v4: Single import replaces @tailwind directives */
@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

/* === CSS LAYERS STRATEGY === */
/* Material UI v7 + Tailwind v4 coexistence */
@layer mui, tailwind-components, tailwind-utilities;

/* === TAILWIND V4 CONFIGURATION === */
@theme {
  /* Content is auto-detected in v4 */

  /* Container customization */
  --breakpoint-2xl: 1400px;

  /* shadcn/ui design system colors */
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  /* Border radius tokens */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Animation keyframes */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from { height: 0; }
    to { height: var(--radix-accordion-content-height); }
  }

  @keyframes accordion-up {
    from { height: var(--radix-accordion-content-height); }
    to { height: 0; }
  }
}

/* === CSS VARIABLES (Material Design 3 Color System) === */
:root {
    /* Material Design 3 Generated Colors - Primary Family */
    --primary: 256 34% 48%;
    --primary-foreground: 0 0% 100%;
    --primary-container: 261 100% 93%;
    --on-primary-container: 262 100% 18%;
    
    /* Material Design 3 Generated Colors - Secondary Family */
    --secondary: 259 11% 40%;
    --secondary-foreground: 0 0% 100%;
    --secondary-container: 263 65% 92%;
    --on-secondary-container: 257 26% 13%;
    
    /* Material Design 3 Generated Colors - Tertiary Family */
    --tertiary: 341 21% 41%;
    --tertiary-foreground: 0 0% 100%;
    --tertiary-container: 344 100% 93%;
    --on-tertiary-container: 336 51% 13%;
    
    /* Material Design 3 Generated Colors - Surface Family */
    --surface: 300 100% 99%;
    --on-surface: 260 5% 11%;
    --surface-variant: 278 22% 90%;
    --on-surface-variant: 267 6% 29%;
    
    /* Material Design 3 Generated Colors - Error Family */
    --error: 0 75% 42%;
    --error-foreground: 0 0% 100%;
    --error-container: 6 100% 92%;
    --on-error-container: 358 100% 13%;
    
    /* Material Design 3 Generated Colors - Additional */
    --outline: 270 4% 48%;
    --outline-variant: 273 10% 79%;
    --background: 300 100% 99%;
    --on-background: 260 5% 11%;
    
    /* Map Material 3 colors to shadcn/ui system */
    --foreground: var(--on-surface);
    --muted: var(--surface-variant);
    --muted-foreground: var(--on-surface-variant);
    --card: var(--surface);
    --card-foreground: var(--on-surface);
    --popover: var(--surface);
    --popover-foreground: var(--on-surface);
    --accent: var(--secondary-container);
    --accent-foreground: var(--on-secondary-container);
    --destructive: var(--error);
    --destructive-foreground: var(--error-foreground);
    --border: var(--outline-variant);
    --input: var(--outline);
    --ring: var(--primary);
    
    /* Radius configuration */
    --radius: 0.5rem;
    
    /* Sidebar colors (using Material 3 surface colors) */
    --sidebar: var(--surface);
    --sidebar-foreground: var(--on-surface);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--primary-foreground);
    --sidebar-accent: var(--secondary-container);
    --sidebar-accent-foreground: var(--on-secondary-container);
    --sidebar-border: var(--outline-variant);
    --sidebar-ring: var(--primary);
}

.dark {
    /* Material Design 3 Generated Colors - Primary Family (Dark) */
    --primary: 257 100% 87%;
    --primary-foreground: 259 58% 28%;
    --primary-container: 257 43% 38%;
    --on-primary-container: 261 100% 93%;
    
    /* Material Design 3 Generated Colors - Secondary Family (Dark) */
    --secondary: 262 26% 81%;
    --secondary-foreground: 258 18% 22%;
    --secondary-container: 258 13% 31%;
    --on-secondary-container: 263 65% 92%;
    
    /* Material Design 3 Generated Colors - Surface Family (Dark) */
    --surface: 260 5% 11%;
    --on-surface: 300 9% 89%;
    --surface-variant: 267 6% 29%;
    --on-surface-variant: 273 10% 79%;
    
    /* Material Design 3 Generated Colors - Error Family (Dark) */
    --error: 6 100% 84%;
    --error-foreground: 357 100% 21%;
    --error-container: 356 100% 29%;
    --on-error-container: 6 100% 84%;
    
    /* Material Design 3 Generated Colors - Additional (Dark) */
    --outline: 270 5% 58%;
    --outline-variant: 267 6% 29%;
    --background: 260 5% 11%;
    --on-background: 300 9% 89%;
    
    /* Map Material 3 colors to shadcn/ui system */
    --foreground: var(--on-surface);
    --muted: var(--surface-variant);
    --muted-foreground: var(--on-surface-variant);
    --card: var(--surface);
    --card-foreground: var(--on-surface);
    --popover: var(--surface);
    --popover-foreground: var(--on-surface);
    --accent: var(--secondary-container);
    --accent-foreground: var(--on-secondary-container);
    --destructive: var(--error);
    --destructive-foreground: var(--error-foreground);
    --border: var(--outline-variant);
    --input: var(--outline);
    --ring: var(--primary);
    
    /* Sidebar colors (using Material 3 surface colors) */
    --sidebar: var(--surface);
    --sidebar-foreground: var(--on-surface);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--primary-foreground);
    --sidebar-accent: var(--secondary-container);
    --sidebar-accent-foreground: var(--on-secondary-container);
    --sidebar-border: var(--outline-variant);
    --sidebar-ring: var(--primary);
}

/* === LAYER ISOLATION === */

/* Ensure MUI styles take precedence in mui layer */
@layer mui {
  /* MUI-specific overrides if needed */
  .MuiCssBaseline-root {
    /* Preserve MUI's CSS baseline - will be applied by MUI automatically */
  }
}

/* Utility classes for migration */
@layer tailwind-components {
  .mui-migration {
    /* Classes to help with MUI->Tailwind migration */
    @apply transition-all duration-200;
  }

  /* Bridge utility for gradual migration */
  .tw-reset {
    /* Reset MUI styles when needed */
    all: revert;
  }
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}