#!/bin/sh
echo "🔍 Scanning for secrets..."
gitleaks protect --staged --verbose

if [ $? -ne 0 ]; then
    echo "❌ SECRET DETECTED! Commit blocked."
    echo "Remove secrets before committing."
    exit 1
fi

echo "🎨 Formatting staged files..."
npx lint-staged
