#!/bin/sh
echo "ğŸ” Running pre-push validation checks..."

# Run type check
echo "ğŸ“ Type checking..."
npm run typecheck:brief
if [ $? -ne 0 ]; then
  echo "âŒ TypeScript errors found. Fix them before pushing."
  echo "ğŸ’¡ If intentionally pushing incomplete work, you may use --no-verify"
  exit 1
fi

# Run linting
echo "ğŸ§¹ Linting..."
npm run lint:brief
if [ $? -ne 0 ]; then
  echo "âŒ Linting errors found. Fix them before pushing."
  echo "ğŸ’¡ If intentionally pushing incomplete work, you may use --no-verify"
  exit 1
fi

# Run formatting check
echo "âœ¨ Checking formatting..."
npm run format:brief
if [ $? -ne 0 ]; then
  echo "âŒ Formatting errors found. Run 'npm run format:write' to fix."
  echo "ğŸ’¡ If intentionally pushing incomplete work, you may use --no-verify"
  exit 1
fi

echo "âœ… All pre-push checks passed!"
echo "ğŸ’¡ If intentionally pushing incomplete work, you may use --no-verify"